<!-- 适老化设计：超大字体、高对比度、简洁布局 -->

<view class="container">
  <!-- 顶部标题 -->
  <view class="header">
    <text class="title">语音支付</text>
    <text class="subtitle">按住说话，松开识别</text>
  </view>

  <!-- 待缴费项目快速预览 -->
  <view class="unpaid-summary" wx:if="{{unpaidItems.length > 0}}">
    <text class="summary-title">您有 {{unpaidItems.length}} 项待缴费用</text>
    <view class="item-list">
      <view class="item" wx:for="{{unpaidItems}}" wx:key="item_id">
        <text class="item-type">{{item.item_type}}</text>
        <text class="item-amount">¥{{item.amount}}</text>
      </view>
    </view>
  </view>

  <!-- 语音识别状态展示区 -->
  <view class="recognition-area">
    <!-- 状态图标 -->
    <view class="status-icon">
      <image 
        wx:if="{{recognitionStatus === 'idle'}}" 
        src="/images/mic-idle.png" 
        class="icon"
      />
      <image 
        wx:if="{{recognitionStatus === 'recording'}}" 
        src="/images/mic-recording.gif" 
        class="icon recording"
      />
      <image 
        wx:if="{{recognitionStatus === 'recognizing'}}" 
        src="/images/loading.gif" 
        class="icon"
      />
      <image 
        wx:if="{{recognitionStatus === 'success'}}" 
        src="/images/success.png" 
        class="icon"
      />
      <image 
        wx:if="{{recognitionStatus === 'error'}}" 
        src="/images/error.png" 
        class="icon"
      />
    </view>

    <!-- 回复文本（大字体显示） -->
    <view class="reply-text-area">
      <text class="reply-text">{{replyText || '请按住下方按钮说话'}}</text>
    </view>

    <!-- 录音时长显示 -->
    <view class="recording-timer" wx:if="{{isRecording}}">
      <text class="timer">录音中 {{recordingTime}}s</text>
    </view>
  </view>

  <!-- 语音录音按钮（超大按钮，适老化设计） -->
  <view class="record-button-area">
    <button 
      class="record-button {{isRecording ? 'recording' : ''}}"
      bindtouchstart="startRecord"
      bindtouchend="stopRecord"
      bindtouchcancel="stopRecord"
      hover-class="button-hover"
    >
      <image 
        src="{{isRecording ? '/images/mic-white.png' : '/images/mic-primary.png'}}" 
        class="button-icon"
      />
      <text class="button-text">{{isRecording ? '松开 结束' : '按住 说话'}}</text>
    </button>
  </view>

  <!-- 快捷操作按钮 -->
  <view class="quick-actions">
    <button class="action-button" bindtap="queryUnpaidByVoice">
      <text class="action-text">查询待缴费</text>
    </button>
    <button class="action-button secondary" bindtap="resetSession">
      <text class="action-text">重新开始</text>
    </button>
  </view>

  <!-- 使用提示（可折叠） -->
  <view class="tips-area">
    <view class="tips-header">
      <text class="tips-title">💡 使用提示</text>
    </view>
    <view class="tips-content">
      <text class="tip-item">• 按住按钮开始说话，松开后自动识别</text>
      <text class="tip-item">• 可以说"我要缴水费"、"帮我交电费"等</text>
      <text class="tip-item">• 说"确认"或"好的"完成支付</text>
      <text class="tip-item">• 支持普通话、粤语、四川话等方言</text>
    </view>
  </view>

  <!-- 播放中指示器 -->
  <view class="playing-indicator" wx:if="{{isPlaying}}">
    <image src="/images/speaker.gif" class="speaker-icon" />
    <text class="playing-text">正在播放回复...</text>
  </view>
</view>
